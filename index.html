<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAI Tutor: Smart AI Learning</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; font-family: sans-serif; }
        /* Yeh hissa button ko upar dikhayega */
        #ui-layer { 
            position: fixed; 
            top: 20px; 
            left: 50%; 
            transform: translateX(-50%); 
            z-index: 9999; 
            background: rgba(255, 255, 255, 0.9); 
            padding: 15px; 
            border-radius: 15px; 
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            width: 80%;
        }
        .logo-img { width: 50px; height: 50px; border-radius: 50%; margin-bottom: 5px; }
    </style>
</head>
<body>

    <div id="ui-layer">
        <img src="1000081883.jpg" class="logo-img" alt="Logo"><br>
        <b style="color: #333;">RAI Tutor: PDF Select Karein</b><br><br>
        <input type="file" id="pdfLoader" accept="application/pdf" style="width: 100%;">
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-entity id="book-anchor" position="0 0 -2.5">
            <a-box id="leftP" position="-0.55 0 0" width="1" height="1.4" depth="0.04" material="color: white"></a-box>
            <a-box id="rightP" position="0.55 0 0" width="1" height="1.4" depth="0.04" material="color: white"></a-box>
        </a-entity>
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        let pdfDoc = null, pageNum = 1;
        document.getElementById('pdfLoader').onchange = function(e) {
            let file = e.target.files[0];
            let reader = new FileReader();
            reader.onload = function() {
                let typedarray = new Uint8Array(this.result);
                pdfjsLib.getDocument(typedarray).promise.then(pdf => {
                    pdfDoc = pdf;
                    alert("PDF Load Ho Gayi! Ab Camera Book par Karein.");
                    renderBook();
                });
            };
            reader.readAsArrayBuffer(file);
        };
        function renderPage(num, elementId) {
            if (!pdfDoc || num > pdfDoc.numPages || num < 1) return;
            pdfDoc.getPage(num).then(page => {
                let viewport = page.getViewport({scale: 2});
                let canvas = document.createElement('canvas');
                let ctx = canvas.getContext('2d');
                canvas.height = viewport.height; canvas.width = viewport.width;
                page.render({canvasContext: ctx, viewport: viewport}).promise.then(() => {
                    let texture = new THREE.CanvasTexture(canvas);
                    let mesh = document.getElementById(elementId).getObject3D('mesh');
                    mesh.material.map = texture; mesh.material.needsUpdate = true;
                });
            });
        }
        function renderBook() { renderPage(pageNum, 'leftP'); renderPage(pageNum + 1, 'rightP'); }
    </script>
</body>
</html>
